[toc]

# 伴学小站API接口文档

###### V1.0.0测试版

###### 💪👌👍👏🤞团队制作

###### 联系方式：19863338174

| 版本号 | 更新时间   | 更新内容                                     | 修改人   |
| ------ | ---------- | -------------------------------------------- | -------- |
| V1.0.0 | 2025-10-11 | 初始版本，包含用户注册 / 登录 / 信息查询接口 | 宝酱何在 |

---

## 全局约定

### 1.认证与授权

​	token+本地存储验证：由服务端生成token，小程序端采用wx.setStorage接口异步存储对象数据，过期后刷新token即可

### 2.业务状态码

| 业务状态码 | 说明           | 解决方案                             |
| ---------- | -------------- | ------------------------------------ |
| 0          | 成功           |                                      |
| 100        | 密码错误       |                                      |
| 101        | 验证码错误     |                                      |
| 10001      | 手机号已被注册 | 更换手机号或通过 "忘记密码" 找回账号 |
| 10002      | 手机号不存在   | 检查是否注册                         |
| 10003      | 用户名已存在   | 改名                                 |
| 10004      | 用户不存在     | 检查用户ID是否正确                   |
| 10005      | 用户身份错误   | 检查用户身份是否与接口匹配           |
| 20001      | 订单金额不足   | 检查订单金额或补充账户余额           |

### 3.传输文件格式

​	前端向后端传输统一使用表单数据，后端返回一般为json格式数据

---

## API接口总览

| URL                                                          | 说明           |
| ------------------------------------------------------------ | -------------- |
| [/api/v1/user/login](###/api/v1/user/login)                  | 登录接口       |
| [/api/v1/user/regist/getNum](###/api/v1/user/regist/getNum)  | 注册接口       |
| [/api/v1/user/regist/vrityNum](###/api/v1/user/regist/vrityNum) | 验证码验证接口 |
| [/api/v1/teacher/profile](###/api/v1/teacher/profile)        | 老师信息提交接口 |
| [/api/v1/parent/profile](###/api/v1/parent/profile)          | 家长信息提交接口 |



---

## API接口详情

### /api/v1/user/login

#### （1）接口基础信息

| 字段         | 说明                           | 示例                    |
| ------------ | ------------------------------ | ----------------------- |
| 接口名称     | login                          | 用户登录                |
| 接口路径     | /api/v1/user/login             | POST /api/v1/user/login |
| 请求方法     | POST                           | POST                    |
| 接口描述     | 需查询数据库是否有相关数据     |                         |
| 超时时间     | 接口响应超时限制（默认可省略） | 3000ms                  |
| 是否需要认证 | 否                             | 否                      |

#### （2）请求参数

| 参数名   | 类型   | 是否必选 | 描述                                       | 示例          |
| -------- | ------ | -------- | ------------------------------------------ | ------------- |
| phoneNum | String | 是       | 用户手机号，需符合 11 位中国大陆手机号格式 | "19863339982" |
| password | String | 是       | 密码，6-20 位                              | "123456"      |

#### （3）响应数据

- **响应格式**：JSON
- **响应字段说明**：

| 字段名   | 类型    | 描述                                        |
| -------- | ------- | ------------------------------------------- |
| code     | Integer | 0为成功，100为密码错误，10002为手机号未注册 |
| msg      | String  | 成功固定为"success",失败剩下全都没有        |
| id       | Integer | 用户唯一标识                                |
| nickname | String  | 用户昵称                                    |
| identity | String  | 用户身份，parent或teacher                   |

---

### /api/v1/user/regist/getNum

#### （1）接口基础信息

| 字段         | 说明                           | 示例/解释                       |
| ------------ | ------------------------------ | ------------------------------- |
| 接口名称     | getNum                         | 获取注册验证码                  |
| 接口路径     | /api/v1/user/regist/getNum     | POST /api/v1/user/regist/getNum |
| 请求方法     | POST                           | POST                            |
| 超时时间     | 接口响应超时限制（默认可省略） | 3000ms                          |
| 是否需要认证 | 否                             | 否                              |

#### （2）请求参数

| 参数名   | 类型   | 是否必选 | 描述                                       | 示例          |
| -------- | ------ | -------- | ------------------------------------------ | ------------- |
| phoneNum | String | 是       | 用户手机号，需符合 11 位中国大陆手机号格式 | "19863339982" |

#### （3）响应数据

- **响应格式**：JSON
- **响应字段说明**：

| 字段名 | 类型    | 描述                                 |
| ------ | ------- | ------------------------------------ |
| code   | Integer | 0为成功，10001为手机号已注册         |
| msg    | String  | 成功固定为"success",失败剩下全都没有 |

---

### /api/v1/user/regist/verityNum

#### （1）接口基础信息

| 字段         | 说明                           | 示例/解释                         |
| ------------ | ------------------------------ | --------------------------------- |
| 接口名称     | vrityNum                       | 验证注册验证码,同时注册账号       |
| 接口路径     | /api/v1/user/regist/vrityNum   | POST /api/v1/user/regist/vrityNum |
| 请求方法     | POST                           | POST                              |
| 超时时间     | 接口响应超时限制（默认可省略） | 3000ms                            |
| 是否需要认证 | 否                             | 否                                |

#### （2）请求参数

| 参数名   | 类型   | 是否必选 | 描述                                                | 示例               |
| -------- | ------ | -------- | --------------------------------------------------- | ------------------ |
| phoneNum | String | 是       | 用户手机号，需符合 11 位中国大陆手机号格式          | "19863339982"      |
| virCode  | String | 是       | 用户接收到的验证码                                  | "123456"           |
| nickname | String | 是       | 用户昵称，小于50字符                                | "BaoJiang"         |
| identity | String | 是       | 用户身份，只有"parent"(家长)和"teacher"(老师)两个值 | "parent"           |
| password | String | 是       | 用户密码，后端自动使用hash存储，前端传输注意加密    | "123456"           |
| email    | String | 否       | 用户邮箱                                            | "xiaoming@163.com" |

#### （3）响应数据

- **响应格式**：JSON
- **响应字段说明**：

| 字段名 | 类型    | 描述                                          |
| ------ | ------- | --------------------------------------------- |
| code   | Integer | 0为成功，101为验证错误                        |
| msg    | String  | 成功固定为"success",失败为"vrityNum not good" |

---

### /api/v1/teacher/profile

#### （1）接口基础信息

| 字段         | 说明                           | 示例/解释                         |
| ------------ | ------------------------------ | --------------------------------- |
| 接口名称     | submit_teacher_profile         | 老师信息提交                      |
| 接口路径     | /api/v1/teacher/profile        | POST /api/v1/teacher/profile      |
| 请求方法     | POST                           | POST                              |
| 接口描述     | 提交或更新老师个人信息          |                                   |
| 超时时间     | 接口响应超时限制（默认可省略） | 3000ms                            |
| 是否需要认证 | 是                             | 是                                |

#### （2）请求参数

| 参数名      | 类型    | 是否必选 | 描述                      | 示例                  |
| ----------- | ------- | -------- | ------------------------- | --------------------- |
| user_id     | Integer | 是       | 用户ID                    | 1                     |
| subject     | String  | 是       | 教授科目，多个用逗号分隔  | "数学,英语"           |
| education   | String  | 否       | 学历                      | "本科"               |
| experience  | String  | 否       | 教学经验描述              | "5年高中数学教学经验" |
| introduction| String  | 否       | 个人介绍                  | "热爱教育事业"       |
| hourly_rate | Float   | 是       | 时薪                      | 150.00                |

#### （3）响应数据

- **响应格式**：JSON
- **响应字段说明**：

| 字段名     | 类型    | 描述                                          |
| ---------- | ------- | --------------------------------------------- |
| code       | Integer | 0为成功，10004为用户不存在，10005为用户身份错误 |
| msg        | String  | 成功为"创建成功"或"更新成功"，失败为错误信息 |
| teacher_id | Integer | 老师信息ID                                     |

---

### /api/v1/parent/profile

#### （1）接口基础信息

| 字段         | 说明                           | 示例/解释                         |
| ------------ | ------------------------------ | --------------------------------- |
| 接口名称     | submit_parent_profile          | 家长信息提交                      |
| 接口路径     | /api/v1/parent/profile         | POST /api/v1/parent/profile       |
| 请求方法     | POST                           | POST                              |
| 接口描述     | 提交或更新家长个人信息          |                                   |
| 超时时间     | 接口响应超时限制（默认可省略） | 3000ms                            |
| 是否需要认证 | 是                             | 是                                |

#### （2）请求参数

| 参数名      | 类型    | 是否必选 | 描述                | 示例                  |
| ----------- | ------- | -------- | ------------------- | --------------------- |
| user_id     | Integer | 是       | 用户ID              | 1                     |
| child_grade | String  | 否       | 孩子年级            | "高三"               |
| needs       | String  | 否       | 家教需求描述        | "需要数学辅导，备战高考" |
| hourly_rate | Float   | 是       | 时薪                | 150.00                |

#### （3）响应数据

- **响应格式**：JSON
- **响应字段说明**：

| 字段名    | 类型    | 描述                                          |
| --------- | ------- | --------------------------------------------- |
| code      | Integer | 0为成功，10004为用户不存在，10005为用户身份错误 |
| msg       | String  | 成功为"创建成功"或"更新成功"，失败为错误信息 |
| parent_id | Integer | 家长信息ID                                     |

---

```

